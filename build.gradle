import org.springframework.boot.gradle.plugin.SpringBootPlugin

buildscript {
  repositories {
    mavenCentral()
    jcenter()
    maven {
      url "https://plugins.gradle.org/m2/"
    }
  }

  dependencies {
    classpath "org.springframework.boot:spring-boot-gradle-plugin:2.1.4.RELEASE"
    classpath 'io.spring.gradle:dependency-management-plugin:1.0.6.RELEASE'
    classpath "gradle.plugin.gradle-plugins:jartest:1.0.1"
  }
}

allprojects {
  group 'kr.lul.kobalttown'
  version '0.0.1.SNAPSHOT'

  apply plugin: 'idea'
  apply plugin: 'eclipse'
}

subprojects {
  apply plugin: 'java'
  apply plugin: 'java-library'
  apply plugin: 'org.springframework.boot'
  apply plugin: 'io.spring.dependency-management'
  apply plugin: 'com.github.hauner.jarTest'

  sourceCompatibility = 11
  targetCompatibility = 11

  repositories {
    mavenCentral()
    jcenter()
  }

  dependencyManagement {
    imports {
      mavenBom SpringBootPlugin.BOM_COORDINATES
    }
    
    dependencies {
      dependency 'io.github.jpenren:thymeleaf-spring-data-dialect:3.4.0'
    }
  }

  dependencies {
    annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'

    testImplementation project(':common-test')

    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.apache.commons:commons-lang3'
  }

  bootJar.enabled = false
  jar.enabled = true
}